<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Explorateur d'applications</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <style>
    .apps-wrap{min-height:100vh;display:grid;grid-template-rows:1fr auto;background:var(--sp-bg);color:var(--sp-text);}
    .apps-main{max-width:1200px;margin:0 auto;padding:20px 16px;width:100%;}
    .apps-head{text-align:center;margin-bottom:14px;}
    .apps-head h1{margin-bottom:6px;}
    .apps-tip{font-size:0.95rem;color:var(--sp-muted);max-width:720px;margin:0 auto;}
    .apps-grid{display:grid;grid-template-columns:minmax(280px,360px) 1fr;gap:16px;align-items:flex-start;}
    .apps-panel{background:var(--sp-surface);border-radius:16px;box-shadow:var(--sp-card-shadow);padding:16px;}
    .apps-panel h2{margin-top:0;margin-bottom:8px;font-size:1.1rem;}
    .apps-actions{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:12px;}
    .apps-actions input[type="search"]{flex:1;min-width:180px;border:1px solid var(--sp-border);border-radius:999px;padding:10px 14px;background:var(--sp-surface);color:var(--sp-text);}
    .apps-actions .apps-btn{padding:10px 14px;border-radius:999px;border:1px solid transparent;font-weight:600;cursor:pointer;background:var(--sp-primary);color:#fff;display:inline-flex;align-items:center;gap:6px;text-decoration:none;}
    .apps-actions .apps-btn.secondary{background:var(--sp-surface);color:var(--sp-primary);border-color:var(--sp-primary);}
    .apps-list{display:flex;flex-direction:column;gap:8px;max-height:70vh;overflow:auto;padding-right:4px;}
    .app-card{border:1px solid var(--sp-border);border-radius:12px;padding:10px 12px;cursor:pointer;transition:box-shadow 0.2s,border-color 0.2s;background:var(--sp-surface);}
    .app-card:hover{box-shadow:var(--sp-card-shadow);}
    .app-card.selected{border-color:var(--sp-primary);box-shadow:0 10px 24px rgba(30,144,255,0.25);}
    .app-title{font-weight:600;font-size:1rem;margin-bottom:4px;display:flex;align-items:center;justify-content:space-between;gap:6px;}
    .app-meta{font-size:0.85rem;color:var(--sp-muted);display:flex;flex-wrap:wrap;gap:4px;}
    .app-meta span{background:var(--sp-table-odd);border-radius:999px;padding:2px 8px;}
    .app-open{margin-top:6px;font-size:0.82rem;color:var(--sp-primary);font-weight:600;display:inline-flex;align-items:center;gap:4px;}
    .app-tags{margin-top:6px;display:flex;flex-wrap:wrap;gap:4px;}
    .app-tags .tag{font-size:0.8rem;background:var(--sp-accent-orange);color:#7a3f00;padding:2px 8px;border-radius:8px;}
    .apps-detail{min-height:320px;}
    .app-detail-empty{color:var(--sp-muted);text-align:center;padding:40px 10px;}
    .app-detail-header h2{margin:0;font-size:1.4rem;}
    .app-detail-header p{margin:4px 0 0;color:var(--sp-muted);}
    .app-detail-meta{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:10px;margin:12px 0;}
    .app-detail-meta .meta-card{background:var(--sp-table-odd);border-radius:12px;padding:10px;}
    .app-detail-meta .meta-card span{display:block;font-size:0.8rem;color:var(--sp-muted);}
    .app-detail-meta .meta-card strong{display:block;margin-top:4px;font-size:1rem;color:var(--sp-text);}
    .app-detail-actions{display:flex;flex-wrap:wrap;gap:8px;margin:14px 0;}
    .apps-btn.danger{background:var(--sp-accent-red);color:#fff;}
    .apps-btn.ghost{background:var(--sp-surface);color:var(--sp-text);border-color:var(--sp-border);}
    .app-detail-section{margin-top:12px;}
    .app-detail-section h3{margin-bottom:6px;}
    .app-meta-list{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:8px;font-size:0.9rem;}
    .app-meta-list .meta-row{background:var(--sp-table-odd);border:1px dashed var(--sp-border);border-radius:8px;padding:8px;}
    .app-meta-list .meta-row strong{display:block;font-size:0.8rem;text-transform:uppercase;color:var(--sp-muted);}
    .app-participants-preview{max-height:220px;overflow:auto;border:1px solid var(--sp-border);border-radius:12px;}
    .app-participants-preview table{width:100%;border-collapse:collapse;font-size:0.9rem;}
    .app-participants-preview th,.app-participants-preview td{padding:6px 8px;border-bottom:1px solid var(--sp-border);text-align:left;}
    .app-participants-preview th{background:var(--sp-sticky-bg);}
    .app-participants-preview tr:nth-child(even){background:var(--sp-table-even);}
    .app-participants-preview tr:nth-child(odd){background:var(--sp-table-odd);}
    .app-raw details{margin-top:10px;}
    .app-raw pre{max-height:220px;overflow:auto;background:#0f172a;color:#e2e8f0;padding:12px;border-radius:10px;font-size:0.8rem;}
    .apps-toast{position:fixed;left:50%;bottom:22px;transform:translateX(-50%);padding:10px 18px;border-radius:999px;background:var(--sp-primary);color:#fff;box-shadow:var(--sp-card-shadow);opacity:0;pointer-events:none;transition:opacity 0.2s;}
    .apps-toast.visible{opacity:1;}
    @media (max-width: 960px){
      .apps-grid{grid-template-columns:1fr;}
      .apps-list{max-height:none;}
    }
    html[data-theme="dark"] .app-tags .tag{color:#1b1204;}
    html[data-theme="dark"] .app-raw pre{background:#04070f;color:#e6ecff;}
  </style>
</head>
<body>
  <div class="apps-wrap">
    <main class="apps-main">
      <div class="apps-head">
        <h1>üì¶ Explorateur d'applications</h1>
        <p>Chaque QR scann√© (application compl√®te ou simple liste d'√©l√®ves) est archiv√© ici pour rester sous la main.</p>
        <p class="apps-tip">Touchez une carte pour ouvrir l'archive, r√©importer les √©l√®ves, exporter le JSON ou supprimer l'entr√©e. Les donn√©es restent stock√©es localement sur l'appareil.</p>
      </div>

      <div class="apps-grid">
        <section class="apps-panel">
          <h2>Sources d√©tect√©es <span id="apps-count"></span></h2>
          <div class="apps-actions">
            <input id="apps-search" type="search" placeholder="Rechercher par nom, version, tag...">
            <button id="apps-refresh" class="apps-btn secondary">‚Üª Actualiser</button>
            <a href="index.html" class="apps-btn ghost">üè† Accueil</a>
          </div>
          <div id="apps-list" class="apps-list" aria-live="polite"></div>
        </section>

        <section class="apps-panel apps-detail">
          <div id="app-detail" class="app-detail-content">
            <div class="app-detail-empty">
              <p>Scannez un QR application compatible pour l'afficher ici.</p>
            </div>
          </div>
        </section>
      </div>
    </main>

    <footer>ScanProf - √âquipe EPS Lyc√©e Vauban - LUXEMBOURG - JB</footer>
  </div>

  <div id="apps-toast" class="apps-toast" role="status" aria-live="polite"></div>

  <script src="theme.js" defer></script>
  <script src="app-store.js" defer></script>
  <script src="applications.js" defer></script>
</body>
</html>
